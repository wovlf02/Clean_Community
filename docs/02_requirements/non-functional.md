# 비기능 요구사항

**관련 문서**: [기능 요구사항](./functional.md) | [시스템 설계](../03_architecture/system-design.md)

---

## 1. 성능 요구사항 (NFR-01 ~ NFR-05)

### NFR-01: 페이지 로딩 속도
| 항목 | 요구사항 |
|------|---------|
| **초기 로딩** | 3초 이내 (LCP) |
| **페이지 전환** | 1초 이내 |
| **API 응답** | 500ms 이내 |
| **측정 도구** | Lighthouse, Web Vitals |

### NFR-02: 동시 접속자
| 항목 | 요구사항 |
|------|---------|
| **목표** | 동시 접속자 1,000명 지원 |
| **확장** | Auto Scaling으로 10,000명까지 확장 가능 |

### NFR-03: AI 추론 속도
| 항목 | 요구사항 |
|------|---------|
| **응답 시간** | 500ms 이내 |
| **배치 처리** | 최대 10개 텍스트 동시 처리 |

### NFR-04: 실시간 통신
| 항목 | 요구사항 |
|------|---------|
| **메시지 전송** | 100ms 이내 |
| **연결 유지** | 30분 비활성 시 자동 재연결 |

### NFR-05: 데이터베이스
| 항목 | 요구사항 |
|------|---------|
| **쿼리 응답** | 100ms 이내 |
| **Connection Pool** | 최대 100개 |

---

## 2. 확장성 요구사항 (NFR-06 ~ NFR-08)

### NFR-06: 수평적 확장
| 항목 | 요구사항 |
|------|---------|
| **서버** | Stateless 설계로 수평 확장 가능 |
| **데이터베이스** | Read Replica 지원 |
| **소켓 서버** | Redis Pub/Sub 기반 다중 인스턴스 |

### NFR-07: 스토리지 확장
| 항목 | 요구사항 |
|------|---------|
| **파일 저장** | S3 무제한 확장 |
| **CDN** | CloudFront 글로벌 배포 |

### NFR-08: 마이크로서비스
| 항목 | 요구사항 |
|------|---------|
| **AI 서버** | FastAPI 독립 배포/스케일링 |
| **소켓 서버** | Express.js 독립 배포/스케일링 |

---

## 3. 보안 요구사항 (NFR-09 ~ NFR-15)

### NFR-09: 인증/인가
| 항목 | 요구사항 |
|------|---------|
| **인증 방식** | JWT (Access/Refresh Token) |
| **Access Token** | 15분 만료 |
| **Refresh Token** | 7일 만료, HTTP Only Cookie |
| **비밀번호** | BCrypt 해시 (salt rounds: 12) |

### NFR-10: 통신 보안
| 항목 | 요구사항 |
|------|---------|
| **프로토콜** | HTTPS/WSS 필수 |
| **인증서** | TLS 1.2 이상 |
| **CORS** | 허용 도메인 화이트리스트 |

### NFR-11: 데이터 보호
| 항목 | 요구사항 |
|------|---------|
| **개인정보** | AES-256 암호화 저장 |
| **로그** | 민감정보 마스킹 |
| **백업** | 일 1회 자동 백업 |

### NFR-12: 입력 검증
| 항목 | 요구사항 |
|------|---------|
| **XSS 방지** | 모든 입력값 이스케이프 |
| **SQL Injection** | Prisma ORM 파라미터 바인딩 |
| **CSRF** | CSRF 토큰 검증 |

### NFR-13: Rate Limiting
| 항목 | 요구사항 |
|------|---------|
| **API** | IP당 분당 100회 |
| **로그인 시도** | 5회 실패 시 15분 잠금 |
| **AI 분석** | 사용자당 분당 30회 |

### NFR-14: 파일 업로드 보안
| 항목 | 요구사항 |
|------|---------|
| **확장자 검증** | 화이트리스트 방식 |
| **MIME 타입** | 서버측 검증 |
| **악성코드** | 파일 스캔 (선택) |

### NFR-15: 세션 관리
| 항목 | 요구사항 |
|------|---------|
| **동시 세션** | 최대 5개 디바이스 |
| **세션 무효화** | 비밀번호 변경 시 전체 로그아웃 |

---

## 4. 가용성 요구사항 (NFR-16 ~ NFR-18)

### NFR-16: 서비스 가용성
| 항목 | 요구사항 |
|------|---------|
| **목표** | 99.9% 가용성 (연간 8.76시간 다운타임) |
| **헬스체크** | 30초 간격 |
| **자동 복구** | 장애 감지 시 자동 재시작 |

### NFR-17: 장애 대응
| 항목 | 요구사항 |
|------|---------|
| **알림** | CloudWatch 알람 연동 |
| **로깅** | 중앙 집중식 로그 수집 |
| **모니터링** | 실시간 대시보드 |

### NFR-18: 백업/복구
| 항목 | 요구사항 |
|------|---------|
| **데이터베이스** | 자동 스냅샷 (7일 보관) |
| **파일** | S3 버저닝 활성화 |
| **RPO** | 1시간 이내 |
| **RTO** | 4시간 이내 |

---

## 5. 유지보수성 요구사항 (NFR-19 ~ NFR-22)

### NFR-19: 코드 품질
| 항목 | 요구사항 |
|------|---------|
| **린팅** | ESLint, Prettier 적용 |
| **타입 안전성** | TypeScript strict 모드 |
| **테스트 커버리지** | 70% 이상 |

### NFR-20: 문서화
| 항목 | 요구사항 |
|------|---------|
| **API 문서** | OpenAPI (Swagger) |
| **컴포넌트** | Storybook (선택) |
| **아키텍처** | 설계 문서 유지 |

### NFR-21: 배포
| 항목 | 요구사항 |
|------|---------|
| **CI/CD** | GitHub Actions |
| **무중단 배포** | Rolling Update |
| **롤백** | 1분 이내 롤백 가능 |

### NFR-22: 모니터링
| 항목 | 요구사항 |
|------|---------|
| **APM** | CloudWatch / Sentry |
| **로그** | CloudWatch Logs |
| **메트릭** | 응답 시간, 에러율, CPU/메모리 |

---

## 6. 사용성 요구사항 (NFR-23 ~ NFR-25)

### NFR-23: 반응형 디자인
| 항목 | 요구사항 |
|------|---------|
| **지원 해상도** | 320px ~ 2560px |
| **브레이크포인트** | 모바일(~640px), 태블릿(~1024px), 데스크톱(1024px~) |

### NFR-24: 접근성
| 항목 | 요구사항 |
|------|---------|
| **표준** | WCAG 2.1 Level AA |
| **키보드** | 전체 키보드 네비게이션 |
| **스크린리더** | ARIA 라벨 적용 |

### NFR-25: 브라우저 지원
| 항목 | 요구사항 |
|------|---------|
| **Chrome** | 최신 2개 버전 |
| **Firefox** | 최신 2개 버전 |
| **Safari** | 최신 2개 버전 |
| **Edge** | 최신 2개 버전 |

---

**최종 업데이트**: 2026년 2월 2일
